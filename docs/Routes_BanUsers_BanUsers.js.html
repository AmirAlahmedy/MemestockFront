<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Routes/BanUsers/BanUsers.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Routes/BanUsers/BanUsers.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from 'react';
import GoHome from '../GoHome/index.js';
import { Link, Route, Switch } from 'react-router-dom';
import axios from '../../axios-orders';
import './BanUsers.css';
import Select from 'react-select';

class BanUsers extends Component {
   state = {
      username: [],
      user: '',
      sr: '',
      subscriptions: []

   }
/**
     * Sets the state with changed username in the input fields
     * @function onChangeUser
     * @param {event} - onChange event 
     */
   onChangeUser = (e) => this.setState({ user: e.target.value });
   /**
     * Sets the state with changed subreddit name  in the input fields 
     * @function onChangeSr
     * @param {event} - onChange event 
     */
   onChangeSr = (e) => this.setState({ sr: e.target.value });


   componentDidMount() {
      axios.get("/me/About/" + localStorage.getItem('Username'), { headers: { auth: localStorage.getItem("token") } })
         .then(resp => {
            if (resp.data.Subscriptions.length || resp.data.moderates.length) {
               this.setState({
                  subscriptions: [...resp.data.moderates]
               });
            }
         })
   }
   /**
     * Hnadles the ban of a user 
     * @function BanUser
     * @param {event} - submission event 
     */
   BanUser = (e) => {
      e.preventDefault();
      console.log('done Clicked');


      if (document.getElementById("checkBan").checked === false &amp;&amp; document.getElementById("checkUnBan").checked === false) {
         alert("Please choose ban or unban user");
         return;
      }
      else if (document.getElementById("checkBan").checked === true &amp;&amp; document.getElementById("checkUnBan").checked === true) {
         alert("Please choose only one from ban or unban user");
         return;
      }

      let checker = "";
      if (document.getElementById("getUserBan").value === checker) {
         alert("Please provide a name of user");
         return;
      }
      else if (!this.state.sr) {
         alert("Please provide a subreddit");
         return;
      }

      let headers = {
         auth: localStorage.getItem("token")
      }

      var newBan = {
         Username: this.state.user,
         SrName: this.state.sr
      }

      //ban user
      if (document.getElementById("checkBan").checked) {
         axios.put('/Moderator/ban', newBan, { "headers": headers })
            .then(res => {
               if (res.status == 200) {
                  console.log(res)
                  alert('User banned successfully');
               }
               else if (res.status === 404) {
                  alert("Not Found");
                  return Response.json;
               }

            })
            .catch(error => {
               alert("Error Caught");
            })

      }

      //Unban user
      else if (document.getElementById("checkUnBan").checked) {

         axios.put('/Moderator/unban', newBan, { "headers": headers })
            .then(res => {
               if (res.status == 200) {
                  console.log(res)
                  alert('User unbanned successfully');
               }
               else if (res.status === 404) {
                  alert("Not Found");
                  return Response.json;
               }

            })
            .catch(error => {
               alert("Error Caught");
            })
      }



   }

 /**
     * Sets the name of the subreddit where the post is created
     * @function setSR
     * @param {option} - The subreddit name
     */
   setSR(option) {
      this.setState({
         sr: option.value
      });
   }
   render() {

      return (
         &lt;div className="BanUser">
            &lt;br>&lt;/br>
            &lt;p>Subreddit&lt;/p>
            &lt;Select
               onChange={this.setSR.bind(this)}
               options={this.state.subscriptions.map(sr => { return { value: sr, label: sr } })} />

            &lt;form onSubmit={this.BanUser}>
               &lt;p>Username&lt;/p>
               &lt;input className="username" type="text" id="getUserBan"
                  name="username" placeholder="Username To Be banned or unabnned"
                  value={this.state.user} onChange={this.onChangeUser}
               />
               &lt;input type="submit" value="Done" className="saveComment" />
               &lt;div className="formGroup">
                  &lt;label for="checkBan" className="BanU">Ban user
                  &lt;input type="checkbox" name="checkBan" id="checkBan" />&lt;/label>
                  &lt;label for="checkUnBan" className="UnBanU">Unban user
                  &lt;input type="checkbox" name="checkUnBan" id="checkUnBan" />&lt;/label>
               &lt;/div>
            &lt;/form>

         &lt;/div>
      );

   }



}


export default BanUsers;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#_handleInputChange">_handleInputChange</a></li><li><a href="global.html#_handleOnSubmit">_handleOnSubmit</a></li><li><a href="global.html#BanUser">BanUser</a></li><li><a href="global.html#blockList">blockList</a></li><li><a href="global.html#BlockUser">BlockUser</a></li><li><a href="global.html#CancelCreation">CancelCreation</a></li><li><a href="global.html#cancelEdit">cancelEdit</a></li><li><a href="global.html#cancelSubreddit">cancelSubreddit</a></li><li><a href="global.html#cardViewHandler">cardViewHandler</a></li><li><a href="global.html#checkforpostorcomment">checkforpostorcomment</a></li><li><a href="global.html#checkValidity">checkValidity</a></li><li><a href="global.html#classicViewHandler">classicViewHandler</a></li><li><a href="global.html#closeBlockList">closeBlockList</a></li><li><a href="global.html#closeLogin">closeLogin</a></li><li><a href="global.html#closeRegistration">closeRegistration</a></li><li><a href="global.html#CreateFlair">CreateFlair</a></li><li><a href="global.html#createThread">createThread</a></li><li><a href="global.html#createThreads">createThreads</a></li><li><a href="global.html#createThreadSidebar">createThreadSidebar</a></li><li><a href="global.html#DeleteReport">DeleteReport</a></li><li><a href="global.html#DeleteReportedComment">DeleteReportedComment</a></li><li><a href="global.html#DeleteReportedPost">DeleteReportedPost</a></li><li><a href="global.html#delPost">delPost</a></li><li><a href="global.html#editPost">editPost</a></li><li><a href="global.html#editSubreddit">editSubreddit</a></li><li><a href="global.html#filterList">filterList</a></li><li><a href="global.html#getBlockList">getBlockList</a></li><li><a href="global.html#getCurrentUser">getCurrentUser</a></li><li><a href="global.html#getFlairs">getFlairs</a></li><li><a href="global.html#getListing">getListing</a></li><li><a href="global.html#getMsgs">getMsgs</a></li><li><a href="global.html#getNotif">getNotif</a></li><li><a href="global.html#getReports">getReports</a></li><li><a href="global.html#getThreads">getThreads</a></li><li><a href="global.html#goTo">goTo</a></li><li><a href="global.html#goToCreatePost">goToCreatePost</a></li><li><a href="global.html#goToCreateSr">goToCreateSr</a></li><li><a href="global.html#gotoMod">gotoMod</a></li><li><a href="global.html#handleAboutChange">handleAboutChange</a></li><li><a href="global.html#handleBlock">handleBlock</a></li><li><a href="global.html#handleChange">handleChange</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#handledecrement">handledecrement</a></li><li><a href="global.html#handleEdit">handleEdit</a></li><li><a href="global.html#handleFileChange">handleFileChange</a></li><li><a href="global.html#handleFriend">handleFriend</a></li><li><a href="global.html#handleIncrement">handleIncrement</a></li><li><a href="global.html#handleLoginContainerClick">handleLoginContainerClick</a></li><li><a href="global.html#handleNewImage">handleNewImage</a></li><li><a href="global.html#handleNewPasswordChange">handleNewPasswordChange</a></li><li><a href="global.html#handleRegContainerClick">handleRegContainerClick</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li><li><a href="global.html#handleUnblock">handleUnblock</a></li><li><a href="global.html#leavemoderation">leavemoderation</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#MarkRead">MarkRead</a></li><li><a href="global.html#MarkReadAll">MarkReadAll</a></li><li><a href="global.html#MarkUnRead">MarkUnRead</a></li><li><a href="global.html#MarkUnReadAll">MarkUnReadAll</a></li><li><a href="global.html#onChange">onChange</a></li><li><a href="global.html#onChangeSr">onChangeSr</a></li><li><a href="global.html#onChangeUser">onChangeUser</a></li><li><a href="global.html#onSave">onSave</a></li><li><a href="global.html#openLogInDialogue">openLogInDialogue</a></li><li><a href="global.html#openRegDialogue">openRegDialogue</a></li><li><a href="global.html#removeReq">removeReq</a></li><li><a href="global.html#reply">reply</a></li><li><a href="global.html#setSR">setSR</a></li><li><a href="global.html#sortHandHot">sortHandHot</a></li><li><a href="global.html#sortHandNew">sortHandNew</a></li><li><a href="global.html#sortHandTop">sortHandTop</a></li><li><a href="global.html#srSubscribe">srSubscribe</a></li><li><a href="global.html#srUnSubscribe">srUnSubscribe</a></li><li><a href="global.html#unBlockUser">unBlockUser</a></li><li><a href="global.html#Unfriend">Unfriend</a></li><li><a href="global.html#userHasLoggedIn">userHasLoggedIn</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue May 07 2019 22:19:47 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
