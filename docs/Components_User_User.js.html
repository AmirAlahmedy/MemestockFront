<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Components/User/User.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Components/User/User.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from 'react'
import { NavLink, Route } from 'react-router-dom';
import CardProf from '../CardProf/CardProf';
import CardUser from '../CardUser/CardUser';
import './User.css';
import axios from "../../axios-orders";
import Aux from '../HOC/Auxiliary';
import Moderation from '../../Routes/ModerationPage/ModerationPage';
import Flairs from './Flairs/Flairs';
import Thread from '../../Routes/Thread/Thread'
export class User extends Component {
  constructor(props) {
    super(props);
    this.state = {
      username: '',
      cakeday: '',
      savedPosts: [],
      checkuser: this.props.match.params.username || localStorage.getItem("Username"),
      posts: [],
      comments: []
    }
    //
    //Eshta na m3ak aho
  };
  
     /**
     * Gets the current user name from the local storage
     * @function getCurrentUser
     */
  getCurrentUser() {
    return localStorage.getItem("Username");
  }

  componentDidMount() {
    console.log("propaaat")
    console.log(this.props);
    console.log("username: ", this.state.checkuser);
    const headers = {
      'auth': localStorage.getItem("token")
    }
    let username = this.state.checkuser;
    axios.get('/user/info/' + username, { "headers": headers })
      .then(res => {
        console.log(res);
        console.log(res.data);

        if (res.status == 200) {
          this.setState({
            username: res.data.Username,
            cakeday: res.data.cakeday
          });

          //   for (let post of res.data.savedPosts) {
          //     axios.get('/user/info/'+ username , { "headers": headers })
          //        .then(res => {
          //           if (res.data &amp;&amp; res.status === 200) {
          //              let posts = this.state.savedPosts;
          //              for(const postState of posts){
          //                 if(postState._id === post._id){
          //                   //Na b3ml 7aga h5lasha w a-chek
          //                   //msh mla7ez en fi syntax error aslun? :'D
          //                    postState.children = res.data;//di el req el betgeeb el posts beta3et
          //                    //el user w el mfrood enaha kda khelset yaani chayek keda
          //                 }
          //              }
          //              this.setState({
          //                 savedPosts: res.data.savedPosts
          //              })
          //           }
          //        });
          //  }
        }
      })
      .catch(error => {
        console.log(error.res)
        alert("Error")
      });

    axios.get(`/user/${this.state.checkuser}/posted`, { headers: headers })
      .then((resp) => {
        this.setState({
          comments: resp.data.comments,
          posts: resp.data.posts
        });
      })
      .catch(e => {
        //Imagine it's handling it...
      });



  }




  
     /**
     * Redirects to the desired link
     * @function goTo
     * @param {link} - the desired link
     */
  goTo(link) {
    return function () {
      window.location.href = link;
    }
  }

  render() {
    return (
      &lt;Aux>

        &lt;CardProf cake={this.state.cakeday} q={this.state.username}>&lt;/CardProf>

          &lt;div className="ana">
            &lt;div className="aho">


              &lt;nav className="navbar navbar-expand-lg navbar-light bg-light profnav">
                &lt;ul className="navbar-nav mr-auto proful">

                  &lt;li className="nav-item profit1">
                    &lt;span className="nav-link">&lt;a className='profit default' href="#posts">Posts&lt;/a>&lt;/span>
                  &lt;/li>
                  &lt;li className="nav-item profit1">
                    &lt;span className="nav-link">&lt;a className='profit' href="#comments">Comments&lt;/a>&lt;/span>
                  &lt;/li>
                  {this.state.checkuser === localStorage.getItem("Username") ?
                    &lt;li className="nav-item profit1">
                      &lt;span className="nav-link">&lt;a className='profit' href="#flair">Flairs&lt;/a>&lt;/span>
                    &lt;/li>
                    : null}

                &lt;/ul>

              &lt;/nav>


            &lt;/div>





              &lt;Route exact path='/moderation' component={Moderation} />

            {window.location.href.includes("#flair") &amp;&amp; this.state.checkuser === localStorage.getItem("Username") ? &lt;Flairs /> : null}
            {window.location.href.includes("#posts") || (!window.location.href.includes("#comments") &amp;&amp; !window.location.href.includes("#flair")) ?
              this.state.posts.map(thr => {
                return (
                  &lt;Thread
                    id={thr._id}
                    username={thr.creatorUsername}
                    subreddit={thr.subredditName}
                    title={thr.title}
                    content={thr.body}
                    upvotes={thr.votes}
                    isSpoiler={thr.spoiler}
                    image={thr.postFile === "none" ? null : thr.postFile}
                  />
                )
              })
              : null}

            {window.location.href.includes("#comments") ?
              this.state.comments.map(comment => {
                return (
                  &lt;div className="commentContainer">
                    &lt;a href={`/r/${comment.subreddit}`} className="commentSR">r/{comment.subreddit} &lt;/a>
                    &lt;div className="commentUser">u/{comment.username} &lt;/div>
                    &lt;div className={`comment ${comment.spoiler ? "spoiler" : ""}`}>{comment.content}&lt;/div>
                  &lt;/div>)
              })
              : null}

          &lt;/div>



      &lt;/Aux>







    )
  }
}

export default User

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#_handleInputChange">_handleInputChange</a></li><li><a href="global.html#_handleOnSubmit">_handleOnSubmit</a></li><li><a href="global.html#BanUser">BanUser</a></li><li><a href="global.html#blockList">blockList</a></li><li><a href="global.html#BlockUser">BlockUser</a></li><li><a href="global.html#CancelCreation">CancelCreation</a></li><li><a href="global.html#cancelEdit">cancelEdit</a></li><li><a href="global.html#cancelSubreddit">cancelSubreddit</a></li><li><a href="global.html#cardViewHandler">cardViewHandler</a></li><li><a href="global.html#checkforpostorcomment">checkforpostorcomment</a></li><li><a href="global.html#checkValidity">checkValidity</a></li><li><a href="global.html#classicViewHandler">classicViewHandler</a></li><li><a href="global.html#closeBlockList">closeBlockList</a></li><li><a href="global.html#closeLogin">closeLogin</a></li><li><a href="global.html#closeRegistration">closeRegistration</a></li><li><a href="global.html#CreateFlair">CreateFlair</a></li><li><a href="global.html#createThread">createThread</a></li><li><a href="global.html#createThreads">createThreads</a></li><li><a href="global.html#createThreadSidebar">createThreadSidebar</a></li><li><a href="global.html#DeleteReport">DeleteReport</a></li><li><a href="global.html#DeleteReportedComment">DeleteReportedComment</a></li><li><a href="global.html#DeleteReportedPost">DeleteReportedPost</a></li><li><a href="global.html#delPost">delPost</a></li><li><a href="global.html#editPost">editPost</a></li><li><a href="global.html#editSubreddit">editSubreddit</a></li><li><a href="global.html#filterList">filterList</a></li><li><a href="global.html#getBlockList">getBlockList</a></li><li><a href="global.html#getCurrentUser">getCurrentUser</a></li><li><a href="global.html#getFlairs">getFlairs</a></li><li><a href="global.html#getListing">getListing</a></li><li><a href="global.html#getMsgs">getMsgs</a></li><li><a href="global.html#getNotif">getNotif</a></li><li><a href="global.html#getReports">getReports</a></li><li><a href="global.html#getThreads">getThreads</a></li><li><a href="global.html#goTo">goTo</a></li><li><a href="global.html#goToCreatePost">goToCreatePost</a></li><li><a href="global.html#goToCreateSr">goToCreateSr</a></li><li><a href="global.html#gotoMod">gotoMod</a></li><li><a href="global.html#handleAboutChange">handleAboutChange</a></li><li><a href="global.html#handleBlock">handleBlock</a></li><li><a href="global.html#handleChange">handleChange</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#handledecrement">handledecrement</a></li><li><a href="global.html#handleEdit">handleEdit</a></li><li><a href="global.html#handleFileChange">handleFileChange</a></li><li><a href="global.html#handleFriend">handleFriend</a></li><li><a href="global.html#handleIncrement">handleIncrement</a></li><li><a href="global.html#handleLoginContainerClick">handleLoginContainerClick</a></li><li><a href="global.html#handleNewImage">handleNewImage</a></li><li><a href="global.html#handleNewPasswordChange">handleNewPasswordChange</a></li><li><a href="global.html#handleRegContainerClick">handleRegContainerClick</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li><li><a href="global.html#handleUnblock">handleUnblock</a></li><li><a href="global.html#leavemoderation">leavemoderation</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#MarkRead">MarkRead</a></li><li><a href="global.html#MarkReadAll">MarkReadAll</a></li><li><a href="global.html#MarkUnRead">MarkUnRead</a></li><li><a href="global.html#MarkUnReadAll">MarkUnReadAll</a></li><li><a href="global.html#onChange">onChange</a></li><li><a href="global.html#onChangeSr">onChangeSr</a></li><li><a href="global.html#onChangeUser">onChangeUser</a></li><li><a href="global.html#onSave">onSave</a></li><li><a href="global.html#openLogInDialogue">openLogInDialogue</a></li><li><a href="global.html#openRegDialogue">openRegDialogue</a></li><li><a href="global.html#removeReq">removeReq</a></li><li><a href="global.html#reply">reply</a></li><li><a href="global.html#setSR">setSR</a></li><li><a href="global.html#sortHandHot">sortHandHot</a></li><li><a href="global.html#sortHandNew">sortHandNew</a></li><li><a href="global.html#sortHandTop">sortHandTop</a></li><li><a href="global.html#srSubscribe">srSubscribe</a></li><li><a href="global.html#srUnSubscribe">srUnSubscribe</a></li><li><a href="global.html#unBlockUser">unBlockUser</a></li><li><a href="global.html#Unfriend">Unfriend</a></li><li><a href="global.html#userHasLoggedIn">userHasLoggedIn</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue May 07 2019 22:19:47 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
