<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Routes/CreateSubreddit/CreateSubreddit.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Routes/CreateSubreddit/CreateSubreddit.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from 'react';
import './CreateSubreddit.css';
import axios from '../../axios-orders';

class CreateSubreddit extends Component {

  constructor(props) {
  super(props);
  this.state = {
    Subreddit: '',
    Rule1:'',
    Rule2 :'',
    Rule3 : '',
    moderators:[],
    bio:''
  }
  
    this.handleChange = this.handleChange.bind(this); 
    this.handleSubmit = this.handleSubmit.bind(this);
    this.handleFileChange = this.handleFileChange.bind(this);
};

handleFileChange(e){
  const files = e.target.files;
  if(!files || !files.length) return;
  const reader = new FileReader();

  reader.onload = (evtReader) => {
    if(!evtReader.target.result) return;
    this.setState({
      image: evtReader.target.result
    });
  }
  reader.readAsDataURL(files[0]);
}

handleChange(event) {
this.setState({ [event.target.name]: event.target.value });
}
  /**
     * For sending a creation of subreddit request to the backend 
     * @function handleSubmit
     * @param {event} - onClick event 
     */

handleSubmit (e){
  e.preventDefault();

  let checker ="";
  if (document.getElementById("srSubredditName").value===checker)
  {
    this.setState({UIErr: "Please provide a Subreddit name!"})
    return ;
  }
  else if (document.getElementById("srSubredditRule1").value===checker)
  { 
    this.setState({UIErr: "Please provide at least 3 Subreddit Rules!"})
    return ;
  }
  else if (document.getElementById("srSubredditRule2").value===checker)
  { 
    this.setState({UIErr: "Please provide at least 3 Subreddit Rules!"})
    return ;
  }
  else if (document.getElementById("srSubredditRule3").value===checker)
  { 
    this.setState({UIErr: "Please provide at least 3 Subreddit Rules!"})
    return ;
  }
  else if (document.getElementById("srSubredditBio").value===checker)
  { 
    this.setState({UIErr: "Please provide a Subreddit Bio For the audience!"})
    return ;
  }
  else if (!this.state.image)
  { 
    this.setState({UIErr: "Please provide a Subreddit Cover Photo!"})
    return ;
  }
  //Add more moderators should be optional...
  // else if (document.getElementById("srSubredditModerator").value===checker)
  // { 
  //   this.setState({UIErr: "Please provide a Subreddit Bio For the audience!"})
  //   return ;
  // }
  let newmods = this.state.moderators;
  const modInput = document.getElementById("srSubredditModerator");
  if(modInput.value.trim() &amp;&amp; modInput.value.trim() !== ","){
    newmods.push(modInput.value.split(",").map(val => val.trim()).filter(val => val));
  }

  var srdata ={
    srName : document.getElementById("srSubredditName").value,
    srRules: [
      document.getElementById("srSubredditRule1").value,
      document.getElementById("srSubredditRule2").value,
      document.getElementById("srSubredditRule3").value
    ],
    modUsername : newmods.length ? newmods : null,
    //bio: document.getElementById("srSubredditBio").value,
    base64image: this.state.image
  } 
  let headers = {
        auth: localStorage.getItem("token") 
  }
  axios.post( 'sr/create',srdata,{"headers": headers})
    .then(res => {
      console.log(res);
      console.log(res.status);
      window.location.href = "/r/" + srdata.srName;
    })
    .catch(error => {
    console.log("Axios Error: ",error.response)

  }); 
}

componentDidMount() {
  document.body.classList.add("verticalAlign");
}
componentWillUnmount() {
  document.body.classList.remove("verticalAlign");
}
  render() {
    return (

      &lt;div className="createSubredditContainer">
      &lt;h3>CREATE A SUBREDDIT&lt;/h3>
      &lt;hr>&lt;/hr>
      &lt;form onSubmit={this.handleSubmit}>
        &lt;div className="formGroupSubredditComponent">
        &lt;label for="SubredditName">Enter Subreddit Name&lt;/label>
        &lt;br>&lt;/br>
        &lt;input type="text" name="text" id="srSubredditName" placeholder = "Think of something remarkable!" onChange={this.handleChange} value={this.state.value}/>   
        &lt;/div>
        &lt;div className="formGroupSubredditComponent">
        &lt;label for="SubredditRule">Subreddit Rule:&lt;/label>
        &lt;textarea type="textarea" name="text" id="srSubredditRule1" placeholder = "ex: Flamers will be banned! " onChange={this.handleChange} value={this.state.value}/>   
        &lt;/div>
        &lt;div className="formGroupSubredditComponent">
        &lt;label for="SubredditRule">Subreddit Rule:&lt;/label>
        &lt;textarea type="textarea" name="text" id="srSubredditRule2" placeholder = "ex: Flamers will be banned! " onChange={this.handleChange} value={this.state.value}/>  
        &lt;/div>
        &lt;div className="formGroupSubredditComponent">
        &lt;label for="SubredditRule">Subreddit Rule:&lt;/label>
        &lt;textarea type="textarea" name="text" id="srSubredditRule3" placeholder = "ex: Flamers will be banned! " onChange={this.handleChange} value={this.state.value}/>  
        &lt;/div>
        &lt;div className="formGroupSubredditComponent">
        &lt;label for="SubredditBio">Subreddit Bio:&lt;/label>
        &lt;textarea type="textarea" name="text" id="srSubredditBio" placeholder = "ex: This subreddit is for people who..etc. " onChange={this.handleChange} value={this.state.value}/>  
        &lt;/div>
        &lt;div className="formGroupSubredditComponent">
        &lt;label for="SubredditModeator">Subreddit Moderator:&lt;/label>
        &lt;textarea type="textarea" name="text" id="srSubredditModerator" placeholder="Usernames separated by commas. EX: Mahmoud, Mohamed, JamesBond" onChange={this.handleChange} value={this.state.value}/>  
        &lt;label for="coverPhoto">Cover Photo:&lt;/label>
        &lt;input type="file" name="coverPhoto" id="coverPhoto" onChange={this.handleFileChange} />  
        &lt;/div>
        &lt;button className="srSubredditPageCreateButton">CREATE&lt;/button>  
      &lt;/form>
      &lt;/div>
   
    )
  }
}
export default CreateSubreddit;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#BlockUser">BlockUser</a></li><li><a href="global.html#CancelCreation">CancelCreation</a></li><li><a href="global.html#checkValidity">checkValidity</a></li><li><a href="global.html#CreateFlair">CreateFlair</a></li><li><a href="global.html#createThread">createThread</a></li><li><a href="global.html#createThreads">createThreads</a></li><li><a href="global.html#createThreadSidebar">createThreadSidebar</a></li><li><a href="global.html#filterList">filterList</a></li><li><a href="global.html#getFlairs">getFlairs</a></li><li><a href="global.html#getListing">getListing</a></li><li><a href="global.html#getMsgs">getMsgs</a></li><li><a href="global.html#getThreads">getThreads</a></li><li><a href="global.html#handleChange">handleChange</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#handledecrement">handledecrement</a></li><li><a href="global.html#handleIncrement">handleIncrement</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li><li><a href="global.html#srSubscribe">srSubscribe</a></li><li><a href="global.html#srUnSubscribe">srUnSubscribe</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat May 04 2019 17:12:25 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
